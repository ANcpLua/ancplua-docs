---
id: DATZI-007
category: automation
slug: auth-monitoring
title: Auth monitoring
summary: How to check OAuth credential expiry health via the CLI and optional scripts for phone and systemd-based auth monitoring workflows.
tags: [auth, oauth, monitoring, systemd, termux, scripts, credentials]
---

# Auth Monitoring

Source: https://docs.datzi.ai/automation/auth-monitoring

# Auth monitoring

Datzi exposes OAuth expiry health via `datzi models status`. Use that for
automation and alerting; scripts are optional extras for phone workflows.

## Preferred: CLI check (portable)

```bash
datzi models status --check
```

Exit codes:

- `0`: OK
- `1`: expired or missing credentials
- `2`: expiring soon (within 24h)

This works in cron/systemd and requires no extra scripts.

## Optional scripts (ops / phone workflows)

These live under `scripts/` and are **optional**. They assume SSH access to the
gateway host and are tuned for systemd + Termux.

- `scripts/claude-auth-status.sh` now uses `datzi models status --json` as the
  source of truth (falling back to direct file reads if the CLI is unavailable),
  so keep `datzi` on `PATH` for timers.
- `scripts/auth-monitor.sh`: cron/systemd timer target; sends alerts (ntfy or phone).
- `scripts/systemd/datzi-auth-monitor.{service,timer}`: systemd user timer.
- `scripts/claude-auth-status.sh`: Claude Code + Datzi auth checker (full/json/simple).
- `scripts/mobile-reauth.sh`: guided re-auth flow over SSH.
- `scripts/termux-quick-auth.sh`: one-tap widget status + open auth URL.
- `scripts/termux-auth-widget.sh`: full guided widget flow.
- `scripts/termux-sync-widget.sh`: sync Claude Code creds -> Datzi.

If you don't need phone automation or systemd timers, skip these scripts.
